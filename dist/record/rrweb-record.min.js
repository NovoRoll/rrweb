var rrwebRecord=function(){"use strict";var e,t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function o(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(e||(e={}));var a=1,i=RegExp("[^a-z]");function u(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).reduce(function(e,t){return e+(function(e){return"styleSheet"in e}(n=t)?u(n.styleSheet)||"":n.cssText);var n},""):null}catch(e){return null}}var c=/url\((?:'([^']*)'|"([^"]*)"|([^)]*))\)/gm,s=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,l=/^(data:)([\w\/\+\-]+);(charset=[\w-]+|base64).*,(.*)/i;function d(e,t){return e.replace(c,function(e,n,r,o){var a,i=n||r||o;if(!i)return e;if(!s.test(i))return"url('"+i+"')";if(l.test(i))return"url("+i+")";if("/"===i[0])return"url('"+(((a=t).indexOf("//")>-1?a.split("/").slice(0,3).join("/"):a.split("/")[0]).split("?")[0]+i)+"')";var u=t.split("/"),c=i.split("/");u.pop();for(var d=0,p=c;d<p.length;d++){var f=p[d];"."!==f&&(".."===f?u.pop():u.push(f))}return"url('"+u.join("/")+"')"})}function p(e,t){if(""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function f(e,t,n){return"src"===t||"href"===t&&n?p(e,n):"srcset"===t&&n?function(e,t){return""===t.trim()?t:t.split(",").map(function(t){var n=t.trimLeft().trimRight().split(" ");return 2===n.length?p(e,n[0])+" "+n[1]:1===n.length?""+p(e,n[0]):""}).join(",")}(e,n):"style"===t&&n?d(n,location.href):n}function m(t,n,r,o,a){switch(t.nodeType){case t.DOCUMENT_NODE:return{type:e.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:e.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId};case t.ELEMENT_NODE:var c=!1;"string"==typeof r?c=t.classList.contains(r):t.classList.forEach(function(e){r.test(e)&&(c=!0)});for(var s=function(e){var t=e.toLowerCase().trim();return i.test(t)?"div":t}(t.tagName),l={},p=0,m=Array.from(t.attributes);p<m.length;p++){var h=m[p],v=h.name,y=h.value;l[v]=f(n,v,y)}if("link"===s&&o){var g,b=Array.from(n.styleSheets).find(function(e){return e.href===t.href});(g=u(b))&&(delete l.rel,delete l.href,l._cssText=d(g,b.href))}if("style"===s&&t.sheet&&!(t.innerText||t.textContent||"").trim().length)(g=u(t.sheet))&&(l._cssText=d(g,location.href));if("input"===s||"textarea"===s||"select"===s){y=t.value;"radio"!==l.type&&"checkbox"!==l.type&&y?l.value=a?"*".repeat(y.length):y:t.checked&&(l.checked=t.checked)}if("option"===s){var C=t.parentElement;l.value===C.value&&(l.selected=t.selected)}if("canvas"===s&&(l.rr_dataURL=t.toDataURL()),"audio"!==s&&"video"!==s||(l.rr_mediaState=t.paused?"paused":"played"),c){var E=t.getBoundingClientRect(),I=E.width,S=E.height;l.rr_width=I+"px",l.rr_height=S+"px"}return{type:e.Element,tagName:s,attributes:l,childNodes:[],isSVG:(M=t,"svg"===M.tagName||M instanceof SVGElement||void 0),needBlock:c};case t.TEXT_NODE:var w=t.parentNode&&t.parentNode.tagName,N=t.textContent,T="STYLE"===w||void 0;return T&&N&&(N=d(N,location.href)),"SCRIPT"===w&&(N="SCRIPT_PLACEHOLDER"),{type:e.Text,textContent:N||"",isStyle:T};case t.CDATA_SECTION_NODE:return{type:e.CDATA,textContent:""};case t.COMMENT_NODE:return{type:e.Comment,textContent:t.textContent||""};default:return!1}var M}function h(t,n,r,o,i,u,c){void 0===i&&(i=!1),void 0===u&&(u=!0),void 0===c&&(c=!1);var s,l=m(t,n,o,u,c);if(!l)return console.warn(t,"not serialized"),null;s="__sn"in t?t.__sn.id:a++;var d=Object.assign(l,{id:s});t.__sn=d,r[s]=t;var p=!i;if(d.type===e.Element&&(p=p&&!d.needBlock,delete d.needBlock),(d.type===e.Document||d.type===e.Element)&&p)for(var f=0,v=Array.from(t.childNodes);f<v.length;f++){var y=h(v[f],n,r,o,i,u,c);y&&d.childNodes.push(y)}return d}function v(e,t,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}var y,g,b,C,E,I,S={map:{},getId:function(e){return e.__sn?e.__sn.id:-1},getNode:function(e){return S.map[e]||null},removeNodeFromMap:function(e){var t=e.__sn&&e.__sn.id;delete S.map[t],e.childNodes&&e.childNodes.forEach(function(e){return S.removeNodeFromMap(e)})},has:function(e){return S.map.hasOwnProperty(e)}};function w(e,t,n){void 0===n&&(n={});var r=null,o=0;return function(a){var i=Date.now();o||!1!==n.leading||(o=i);var u=t-(i-o),c=this,s=arguments;u<=0||u>t?(r&&(window.clearTimeout(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=window.setTimeout(function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)},u))}}function N(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function T(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function M(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;return"string"==typeof t?n=e.classList.contains(t):e.classList.forEach(function(e){t.test(e)&&(n=!0)}),n||M(e.parentNode,t)}return M(e.parentNode,t)}function x(e){return Boolean(e.changedTouches)}function D(e,t){e.delete(t),t.childNodes.forEach(function(t){return D(e,t)})}function k(e,t){var n=t.parentNode;if(!n)return!1;var r=S.getId(n);return!!e.some(function(e){return e.id===r})||k(e,n)}function L(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||L(e,n))}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom"}(y||(y={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetInteraction=8]="StyleSheetInteraction"}(g||(g={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd"}(b||(b={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause"}(C||(C={})),function(e){e[e.InsertRule=0]="InsertRule"}(E||(E={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast"}(I||(I={}));var _=function(e,t){return e+"@"+t};function O(e){return"__sn"in e}function R(e,t,r,o){var a=new MutationObserver(function(a){var i,u,c,s,l=[],d=[],p=[],m=[],v=new Set,y=new Set,g=new Set,b={},C=function(e,n){if(!M(e,t)){if(O(e)){y.add(e);var r=null;n&&O(n)&&(r=n.__sn.id),r&&(b[_(e.__sn.id,r)]=!0)}else v.add(e),g.delete(e);e.childNodes.forEach(function(e){return C(e)})}};a.forEach(function(e){var n=e.type,r=e.target,o=e.oldValue,a=e.addedNodes,i=e.removedNodes,u=e.attributeName;switch(n){case"characterData":var c=r.textContent;M(r,t)||c===o||l.push({value:c,node:r});break;case"attributes":c=r.getAttribute(u);if(M(r,t)||c===o)return;var s=d.find(function(e){return e.node===r});s||(s={node:r,attributes:{}},d.push(s)),s.attributes[u]=f(document,u,c);break;case"childList":a.forEach(function(e){return C(e,r)}),i.forEach(function(e){var n=S.getId(e),o=S.getId(r);M(e,t)||(v.has(e)?(D(v,e),g.add(e)):v.has(r)&&-1===n||function e(t){var n=S.getId(t);return!S.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode))}(r)||(y.has(e)&&b[_(n,o)]?D(y,e):p.push({parentId:o,id:n})),S.removeNodeFromMap(e))})}});var E=[],I=function(e){var n=S.getId(e.parentNode);if(-1===n)return E.push(e);m.push({parentId:n,previousId:e.previousSibling?S.getId(e.previousSibling):e.previousSibling,nextId:e.nextSibling?S.getId(e.nextSibling):e.nextSibling,node:h(e,document,S.map,t,!0,r,o)})};try{for(var w=n(y),N=w.next();!N.done;N=w.next()){I(R=N.value)}}catch(e){i={error:e}}finally{try{N&&!N.done&&(u=w.return)&&u.call(w)}finally{if(i)throw i.error}}try{for(var T=n(v),x=T.next();!x.done;x=T.next()){var R=x.value;L(g,R)||k(p,R)?L(y,R)?I(R):g.add(R):I(R)}}catch(e){c={error:e}}finally{try{x&&!x.done&&(s=T.return)&&s.call(T)}finally{if(c)throw c.error}}for(;E.length&&!E.every(function(e){return-1===S.getId(e.parentNode)});)I(E.shift());var A={texts:l.map(function(e){return{id:S.getId(e.node),value:e.value}}).filter(function(e){return S.has(e.id)}),attributes:d.map(function(e){return{id:S.getId(e.node),attributes:e.attributes}}).filter(function(e){return S.has(e.id)}),removes:p,adds:m};(A.texts.length||A.attributes.length||A.removes.length||A.adds.length)&&e(A)});return a.observe(document,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function A(e,t){var n=[];return Object.keys(b).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")}).forEach(function(r){var o=r.toLowerCase(),a=function(n){return function(r){if(!M(r.target,t)){var o=S.getId(r.target),a=x(r)?r.changedTouches[0]:r,i=a.clientX,u=a.clientY;e({type:b[n],id:o,x:i,y:u})}}}(r);n.push(v(o,a))}),function(){n.forEach(function(e){return e()})}}var P,z=["INPUT","TEXTAREA","SELECT"],F=["color","date","datetime-local","email","month","number","range","search","tel","text","time","url","week"],j=new WeakMap;function H(e,n,r,a){function i(e){var t=e.target;if(t&&t.tagName&&!(z.indexOf(t.tagName)<0)&&!M(t,n)){var o=t.type;if("password"!==o&&!t.classList.contains(r)){var i=t.value,c=!1,s=F.includes(o)||"TEXTAREA"===t.tagName;"radio"===o||"checkbox"===o?c=t.checked:s&&a&&(i="*".repeat(i.length)),u(t,{text:i,isChecked:c});var l=t.name;"radio"===o&&l&&c&&document.querySelectorAll('input[type="radio"][name="'+l+'"]').forEach(function(e){e!==t&&u(e,{text:e.value,isChecked:!c})})}}}function u(n,r){var o=j.get(n);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){j.set(n,r);var a=S.getId(n);e(t(t({},r),{id:a}))}}var c=["input","change"].map(function(e){return v(e,i)}),s=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),l=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"]];return s&&s.set&&c.push.apply(c,o(l.map(function(e){return function e(t,n,r,o){var a=Object.getOwnPropertyDescriptor(t,n);return Object.defineProperty(t,n,o?r:{set:function(e){var t=this;setTimeout(function(){r.set.call(t,e)},0),a&&a.set&&a.set.call(this,e)}}),function(){return e(t,n,a||{},!0)}}(e[0],e[1],{set:function(){i({target:this})}})}))),function(){c.forEach(function(e){return e()})}}function U(e,t){void 0===t&&(t={}),function(e,t){var n=e.mutationCb,r=e.mousemoveCb,a=e.mouseInteractionCb,i=e.scrollCb,u=e.viewportResizeCb,c=e.inputCb,s=e.mediaInteractionCb;e.mutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mutation&&t.mutation.apply(t,o(e)),n.apply(void 0,o(e))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,o(e)),r.apply(void 0,o(e))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,o(e)),a.apply(void 0,o(e))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,o(e)),i.apply(void 0,o(e))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,o(e)),u.apply(void 0,o(e))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,o(e)),c.apply(void 0,o(e))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,o(e)),s.apply(void 0,o(e))}}(e,t);var n,r,a,i,u,c,s,l=R(e.mutationCb,e.blockClass,e.inlineStylesheet,e.maskAllInputs),d=(n=e.mousemoveCb,r=e.mousemoveWait,i=[],u=w(function(e){var t=Date.now()-a;n(i.map(function(e){return e.timeOffset-=t,e}),e?g.TouchMove:g.MouseMove),i=[],a=null},500),c=w(function(e){var t=e.target,n=x(e)?e.changedTouches[0]:e,r=n.clientX,o=n.clientY;a||(a=Date.now()),i.push({x:r,y:o,id:S.getId(t),timeOffset:Date.now()-a}),u(x(e))},r,{trailing:!1}),s=[v("mousemove",c),v("touchmove",c)],function(){s.forEach(function(e){return e()})}),p=A(e.mouseInteractionCb,e.blockClass),f=function(e,t){return v("scroll",w(function(n){if(n.target&&!M(n.target,t)){var r=S.getId(n.target);if(n.target===document){var o=document.scrollingElement||document.documentElement;e({id:r,x:o.scrollLeft,y:o.scrollTop})}else e({id:r,x:n.target.scrollLeft,y:n.target.scrollTop})}},100))}(e.scrollCb,e.blockClass),m=function(e){return v("resize",w(function(){var t=N(),n=T();e({width:Number(n),height:Number(t)})},200),window)}(e.viewportResizeCb),h=H(e.inputCb,e.blockClass,e.ignoreClass,e.maskAllInputs),y=function(e,t){var n=function(n){return function(r){var o=r.target;o&&!M(o,t)&&e({type:"play"===n?C.Play:C.Pause,id:S.getId(o)})}},r=[v("play",n("play")),v("pause",n("pause"))];return function(){r.forEach(function(e){return e()})}}(e.mediaInteractionCb,e.blockClass);return function(){l.disconnect(),d(),p(),f(),m(),h(),y()}}function V(e){return t(t({},e),{timestamp:Date.now()})}function W(e){void 0===e&&(e={});var n,o=e.emit,a=e.checkoutEveryNms,i=e.checkoutEveryNth,u=e.blockClass,c=void 0===u?"rr-block":u,s=e.ignoreClass,l=void 0===s?"rr-ignore":s,d=e.inlineStylesheet,p=void 0===d||d,f=e.maskAllInputs,m=void 0!==f&&f,b=e.hooks,C=e.mousemoveWait,I=void 0===C?50:C;if(!o)throw new Error("emit function is required");"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var w=0;function M(e){void 0===e&&(e=!1),P(V({type:y.Meta,data:{href:window.location.href,width:T(),height:N()}}),e);var t=r(function(e,t,n,r){void 0===t&&(t="rr-block"),void 0===n&&(n=!0),void 0===r&&(r=!1);var o={};return[h(e,e,o,t,!1,n,r),o]}(document,c,p,m),2),n=t[0],o=t[1];if(!n)return console.warn("Failed to snapshot the document");S.map=o,P(V({type:y.FullSnapshot,data:{node:n,initialOffset:{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}}}))}P=function(e,t){if(o(e,t),e.type===y.FullSnapshot)n=e,w=0;else if(e.type===y.IncrementalSnapshot){w++;var r=i&&w>=i,u=a&&e.timestamp-n.timestamp>a;(r||u)&&M(!0)}};try{var x=[];x.push(v("DOMContentLoaded",function(){P(V({type:y.DomContentLoaded,data:{}}))}));var D=function(){var e;e=CSSStyleSheet.prototype.insertRule,CSSStyleSheet.prototype.insertRule=function(t,n){return P(V({type:y.IncrementalSnapshot,data:{source:g.StyleSheetInteraction,type:E.InsertRule,rule:t,index:n}})),e.apply(this,arguments)},M(),x.push(U({mutationCb:function(e){return P(V({type:y.IncrementalSnapshot,data:t({source:g.Mutation},e)}))},mousemoveCb:function(e,t){return P(V({type:y.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return P(V({type:y.IncrementalSnapshot,data:t({source:g.MouseInteraction},e)}))},scrollCb:function(e){return P(V({type:y.IncrementalSnapshot,data:t({source:g.Scroll},e)}))},viewportResizeCb:function(e){return P(V({type:y.IncrementalSnapshot,data:t({source:g.ViewportResize},e)}))},inputCb:function(e){return P(V({type:y.IncrementalSnapshot,data:t({source:g.Input},e)}))},mediaInteractionCb:function(e){return P(V({type:y.IncrementalSnapshot,data:t({source:g.MediaInteraction},e)}))},blockClass:c,ignoreClass:l,maskAllInputs:m,inlineStylesheet:p,mousemoveWait:I},b))};return"interactive"===document.readyState||"complete"===document.readyState?D():x.push(v("load",function(){P(V({type:y.Load,data:{}})),D()},window)),function(){x.forEach(function(e){return e()})}}catch(e){console.warn(e)}}return W.addCustomEvent=function(e,t){if(!P)throw new Error("please add custom event after start recording");P(V({type:y.Custom,data:{tag:e,payload:t}}))},W}();
//# sourceMappingURL=rrweb-record.min.js.map
